<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#141414">
  <meta name="description" content="A simple PWA movie watchlist application">
  <title>My Watchlist</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon192.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@300;400;700&display=swap"
    rel="stylesheet">
</head>

<body>

  <header class="app-header">
    <div class="logo">NETFLIX<span>LIST</span></div>
    <button id="enable-native-btn" class="btn-ghost" style="font-size: 0.7rem; border: 1px solid #e50914;">Enable
      Sensors</button>
    <nav class="main-nav">
      <button data-target="queue" class="nav-btn active">Queue</button>
      <button data-target="history" class="nav-btn">History</button>
      <button data-target="roulette" class="nav-btn">Shuffle</button>
      <button data-target="stats" class="nav-btn">Stats</button>
    </nav>
  </header>

  <main id="app-container">
    <!-- VIEW 1: Queue (Active Movies) -->
    <section id="queue" class="view active-view">
      <div class="add-movie-container">
        <h2>Add to Queue</h2>
        <form id="add-form">
          <input type="text" id="movie-input" placeholder="Movie title..." autocomplete="off">
          <button type="submit" class="btn-primary">Add</button>
        </form>
      </div>

      <div class="list-container">
        <h3>My List</h3>
        <ul id="movie-list" class="movie-grid">
          <!-- Movies will be injected here -->
        </ul>
        <div id="empty-state" class="hidden">
          <div style="font-size: 3rem; margin-bottom: 10px;">üçø</div>
          Your queue is empty.<br>Add some movies to watch tonight!
        </div>
    </section>

    <!-- VIEW 2: History (Watched Movies) -->
    <section id="history" class="view hidden-view">
      <h2>Watch History</h2>
      <div class="actions-bar">
        <!-- index.html -->
        <button id="clear-history-btn" class="btn-ghost">
          <span class="icon">üóë</span> Clear History
        </button>
      </div>
      <ul id="history-list" class="movie-grid">
        <!-- Watched movies will be injected here -->
      </ul>
    </section>

    <!-- VIEW 3: Stats -->
    <section id="stats" class="view hidden-view">
      <h2>Viewer Profile</h2>
      <div class="camera-box" style="text-align: center; margin-bottom: 20px;">
        <div id="profile-container">
          <img id="photo-preview" src="https://via.placeholder.com/150"
            style="width: 150px; height: 150px; border-radius: 50%; border: 3px solid #e50914; object-fit: cover;">
        </div>
        <video id="video-stream" autoplay
          style="display: none; width: 100%; max-width: 300px; border-radius: 10px; margin: 10px auto;"></video>
        <canvas id="photo-canvas" style="display: none;"></canvas>

        <div style="margin-top: 10px;">
          <button id="btn-open-camera" class="btn-primary">üì∏ Change Photo</button>
          <button id="btn-take-photo" class="btn-ghost" style="display: none; border: 1px solid #e50914;">Take
            Snap</button>
        </div>
      </div>
      <div id="location-display" class="location-card" style="display: none;">
        <span class="location-icon">üìç</span>
        <span id="location-text">Getting location...</span>
      </div>
      <div class="stats-container">
        <div class="stat-card">
          <span class="stat-number" id="count-total">0</span>
          <span class="stat-label">Total Movies</span>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="count-watched">0</span>
          <span class="stat-label">Watched</span>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="count-pending">0</span>
          <span class="stat-label">To Watch</span>
        </div>
      </div>
    </section>

    <!-- VIEW 4: Roulette / Shuffle -->
    <section id="roulette" class="view hidden-view">
      <h2>What to Watch?</h2>

      <div class="roulette-wrapper">
        <!-- Main screen -->
        <div id="roulette-display" class="roulette-card">
          <div class="card-content">
            <div class="icon-container">
              <span class="icon">üé≤</span>
            </div>
            <div id="roulette-text">Press Spin</div>
          </div>
          <!-- Decorative elements (glints) -->
          <div class="scanline"></div>
        </div>

        <!-- Start button -->
        <button id="spin-btn" class="btn-primary btn-glow">SPIN THE WHEEL</button>

        <!-- Winner section -->
        <div id="winner-actions" class="winner-container hidden">
          <div class="winner-label">Tonight's Pick</div>
          <h3 id="winner-title" class="neon-text">Movie Title</h3>

          <button id="mark-winner-watched" class="btn-outline">
            <span class="check-icon">‚úî</span> Mark as Watched
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script type="module" src="js/app.js"></script>
</body>

</html>